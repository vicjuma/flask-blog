<!DOCTYPE html>
<html lang="eng">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{{url_for('static', filename='css/bootstrap.min.css')}}">
    <script src="https://cdn.ckeditor.com/4.14.0/full-all/ckeditor.js"></script>
    <title>my posts</title>

</head>
<script>
    function submit() {
        var name = document.getElementById('username');
        var message = document.getElementById('message');
        l
        var details = {
            name: name.value,
            message: message.value
        };

        fetch(`${window.origin}/complaint`, {
                method: "POST",
                credentials: "include",
                body: JSON.stringify(details),
                cache: 'no-cache',
                headers: new Headers({
                    'content-type': 'application/json'
                })
            })
            .then(function(response) {
                if (response.status !== 200) {
                    console.log(`there was a problem : ${response.status}`)
                } else {
                    response.json().then(function(data) {
                        console.log(data)
                    })
                }
            })
        name.value = ''
    };
</script>

<body>
    <div class="container-fluid">
        <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
            <a href="#" class="text text-black-50 font-weight-bold text-decoration-none" style="font-family: monospace; font-size: 2em;">sharpMindBlog</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="{{url_for('home')}}"><span class="fa fa-home"></span> Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{url_for('logout')}}"><span class="fa fa-sign-out"></span> sign out</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    my profile
                  </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <img src="https://gravatar.com/avatar/{{user.url}}?s=80&d=monsterid" class="rounded-circle ml-3" alt="{{user.name}}"><span class="display-4 font-weight-bolder text-capitalize text-center">{{d}}</span>
                            <span><a class="dropdown-item" href="#">{{user.email}}</a></span>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="{{url_for('all_posts')}}">posts <span class="badge badge-danger mx-lg-5 ml-lg-5">{{count}}</span></a>
                            <a class="dropdown-item" href="{{url_for('account')}}">create posts</a>
                            <a class="dropdown-item" href="{{url_for('all_posts')}}">edit posts</a>
                            <a class="dropdown-item" href="{{url_for('all_posts')}}">delete posts</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{url_for('account')}}">account</a>
                    </li>
                    <li class="nav-item "><a style="cursor: pointer;" data-toggle="modal" data-target='#invite' class="nav-link">invite</a></li>
                    <li class="nav-item"><a style="cursor: pointer;" class="btn btn-outline-secondary nav-link" data-toggle="modal" data-target='#question'>ask question</a></li>
                </ul>
                <form class="form-inline my-2 my-lg-0" method="POST" action="{{url_for('search')}}">
                    <input class="form-control mr-sm-2" type="search" required placeholder="Search" aria-label="Search" name="name" autocomplete="off">
                    <button class="btn btn-outline-primary my-2 my-sm-0" type="submit">Search posts</button>
                </form>
            </div>
        </nav>
    </div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-3 col-md-3">
                <ul class="list-group">
                    {%for post in post%}
                    <li class="list-group-item">{{post}}</li>
                    {%endfor%}
                </ul>
            </div>
            <div class="col-lg-9 col-md-9 bg-light">
                {% with messages=get_flashed_messages(with_categories=true)%} {% if messages %} {%for category, message in messages%} {% if category %}
                <div class="alert alert-{{category}} alert-dismissable">
                    <button type="button" class="close" data-dismiss="alert">&times;</button> {{ message }}
                </div>{%endif%} {%endfor%} {%endif%} {%endwith%} {%for post in post%}
                <p>{{post.post}}</p>
                <a href="{{url_for('edit', id=post.id)}}" class="btn btn-primary"><span class="fa fa-pencil"></span> edit your post</a>
                <span><a href="{{url_for('delete', id=post.id)}}" class="btn btn-danger"><span class="fa fa-trash"></span> delete your post</a>
                </span>
                <hr> {%endfor%}
            </div>
        </div>
    </div>

    <!--compplaints submission-->
    <div class="container bg-light mt-lg-5">
        <div class="form-group">
            <label for="name">enter your name</label>
            <input type="text" id="name" class="form-control form-control-sm" autocomplete="off" />
        </div>
        <div class="form-group">
            <label for="complaint"> submit your complaints and suggestions here</label>
            <textarea name="complaint" class="form-control form-control-sm" id="message" cols="50" rows="10">

            </textarea>
        </div>
        <button class="btn btn-primary" onclick="submit()"><span class="fa fa-paper-plane"> submit suggestions</span></button>
    </div>



</body>
<script src="{{url_for('static', filename='js/jquery-3.4.1.min.js')}}"></script>
<script src="{{url_for('static', filename='js/bootstrap.min.js')}}"></script>

</html>